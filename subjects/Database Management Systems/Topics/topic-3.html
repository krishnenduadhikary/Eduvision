<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic 3: Entity-Relationship Model - EduVision</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            /* Dark Blue-Grey */
            --primary-light: #3d566e;
            --primary-dark: #1a252f;

            --secondary-color: #3498db;
            /* Bright Blue */
            --secondary-light: #5dade2;
            --secondary-dark: #2980b9;

            --accent-color: #e74c3c;
            /* Red */

            --light-bg: #f8f9fa;
            /* Off-white */
            --light-text: #495057;
            /* Dark Grey */
            --light-card: #ffffff;
            --light-border: #e0e0e0;

            --dark-bg: #1a252f;
            /* Very Dark Blue-Grey */
            --dark-text: #f8f9fa;
            /* Light Grey */
            --dark-card: #2c3e50;
            /* Dark Blue-Grey (same as light primary) */
            --dark-border: #3d566e;
            /* Lighter than dark card */

            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --info-color: #3498db;

            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;

            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);

            --transition: all 0.3s ease-in-out;
        }

        /* Dark mode overrides for semantic colors if they were defined with light/dark specifics */
        html.dark-mode {
            --primary-color: #5dade2;
            /* Light Blue for dark mode primary */
            --primary-light: #85c1e9;
            --primary-dark: #3498db;

            --secondary-color: #bdc3c7;
            /* Light Grey for dark mode secondary */
            --secondary-light: #ecf0f1;
            --secondary-dark: #95a5a6;
        }


        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
            line-height: 1.7;
            color: var(--light-text);
            background-color: var(--light-bg);
            padding-top: 80px;
            /* Height of the fixed header */
            transition: var(--transition);
        }

        html.dark-mode body {
            color: var(--dark-text);
            background-color: var(--dark-bg);
        }

        /* Typography */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Nunito Sans', 'Inter', sans-serif;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
            color: var(--primary-dark);
            /* Use darker primary for headings in light mode */
        }

        html.dark-mode h1,
        html.dark-mode h2,
        html.dark-mode h3,
        html.dark-mode h4,
        html.dark-mode h5,
        html.dark-mode h6 {
            color: var(--primary-light);
            /* Use lighter primary for headings in dark mode */
        }

        h1 {
            font-size: 2.8rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        h2 {
            font-size: 2.2rem;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 0.6rem;
            margin-top: 2.5rem;
        }

        h3 {
            font-size: 1.8rem;
            margin-top: 2rem;
        }

        h4 {
            font-size: 1.5rem;
        }

        h5 {
            font-size: 1.25rem;
            color: var(--secondary-dark);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        html.dark-mode h5 {
            color: var(--secondary-light);
        }


        p {
            margin-bottom: 1.25rem;
            font-size: 1.05rem;
        }

        p.lead {
            font-size: 1.2rem;
            color: var(--light-text);
            opacity: 0.9;
            text-align: center;
            margin-bottom: 2rem;
        }

        html.dark-mode p.lead {
            color: var(--dark-text);
        }


        a {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        a:hover {
            color: var(--secondary-dark);
            text-decoration: underline;
        }

        ul,
        ol {
            padding-left: 20px;
            margin-bottom: 1.25rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Layout */
        .page-container {
            /* Renamed from .container to avoid conflict if bootstrap is ever used */
            display: grid;
            grid-template-columns: 280px 1fr;
            /* Slightly wider sidebar */
            gap: 2.5rem;
            max-width: 1500px;
            /* Wider max-width for larger screens */
            margin: 0 auto;
            padding: 2.5rem;
        }

        @media (max-width: 1024px) {

            /* Adjusted breakpoint */
            .page-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: none;
                /* Hide sidebar on smaller screens, rely on scrolling */
            }
        }

        /* Header */
        header.main-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2.5rem;
            box-shadow: var(--shadow-md);
            z-index: 1000;
        }

        html.dark-mode header.main-header {
            background-color: var(--dark-card);
            /* Match dark card for header in dark mode */
            color: var(--dark-text);
        }

        .header-topic-title {
            flex-grow: 1;
            text-align: center;
            font-size: 1.1em;
            font-weight: 600;
            color: white;
            /* Ensure this text is white on dark header */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 0 15px;
            /* Space around title */
        }

        html.dark-mode .header-topic-title {
            color: var(--dark-text);
            /* Ensure this text is light on light header (dark mode) */
        }


        .eduvision-logo-header {
            /* Specific class for header logo */
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            /* Remove underline from logo link */
        }

        .eduvision-logo-header svg {
            width: 36px;
            /* Slightly larger logo SVG */
            height: 36px;
            color: var(--secondary-light);
        }

        html.dark-mode .eduvision-logo-header svg {
            color: var(--primary-color);
            /* Use dark mode primary for SVG */
        }


        .logo-text {
            font-size: 1.7rem;
            /* Larger logo text */
            font-weight: 800;
            /* Bolder */
            font-family: 'Nunito Sans', sans-serif;
            color: white;
        }

        html.dark-mode .logo-text {
            color: var(--dark-text);
        }


        .header-nav {
            display: flex;
            align-items: center;
            gap: 1.8rem;
            /* More space between nav items */
        }

        .header-nav a {
            color: white;
            font-weight: 500;
            font-size: 1rem;
            position: relative;
            /* For underline effect */
            padding-bottom: 4px;
        }

        .header-nav a::after {
            /* Underline effect */
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--secondary-light);
            transition: width 0.3s ease;
        }

        .header-nav a:hover::after {
            width: 100%;
        }

        html.dark-mode .header-nav a {
            color: var(--dark-text);
        }

        html.dark-mode .header-nav a:hover {
            color: var(--primary-color);
        }

        html.dark-mode .header-nav a::after {
            background-color: var(--primary-color);
        }


        .theme-toggle {
            background: transparent;
            border: 1px solid var(--secondary-light);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-lg);
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background-color: var(--secondary-light);
            color: var(--primary-color);
        }

        .theme-toggle svg {
            margin-right: 0.3rem;
        }

        html.dark-mode .theme-toggle {
            border-color: var(--primary-color);
            color: var(--dark-text);
        }

        html.dark-mode .theme-toggle:hover {
            background-color: var(--primary-color);
            color: var(--dark-card);
            /* Text color for contrast */
        }


        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 100px;
            /* Header height + 20px margin */
            align-self: start;
            background-color: var(--light-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }

        html.dark-mode .sidebar {
            background-color: var(--dark-card);
        }

        .sidebar-title {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
            border-bottom: 2px solid var(--secondary-light);
            padding-bottom: 0.5rem;
        }

        html.dark-mode .sidebar-title {
            color: var(--primary-light);
            border-bottom-color: var(--primary-dark);
        }

        .toc {
            list-style: none;
            padding-left: 0;
            /* Remove default padding for ul */
        }

        .toc li {
            margin-bottom: 0.75rem;
        }

        .toc a {
            display: block;
            padding: 0.6rem 0;
            color: var(--light-text);
            border-left: 4px solid transparent;
            padding-left: 1.2rem;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .toc a:hover {
            color: var(--secondary-color);
            border-left-color: var(--secondary-color);
            background-color: rgba(52, 152, 219, 0.05);
            text-decoration: none;
            transform: translateX(5px);
        }

        .toc a.active {
            color: var(--secondary-dark);
            border-left-color: var(--secondary-dark);
            font-weight: 700;
            background-color: rgba(52, 152, 219, 0.1);
        }

        html.dark-mode .toc a {
            color: var(--dark-text);
        }

        html.dark-mode .toc a:hover {
            color: var(--primary-color);
            border-left-color: var(--primary-color);
            background-color: rgba(93, 173, 226, 0.1);
        }

        html.dark-mode .toc a.active {
            color: var(--primary-light);
            border-left-color: var(--primary-light);
            background-color: rgba(93, 173, 226, 0.15);
        }


        /* Main Content */
        .main-content {
            background-color: var(--light-card);
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            box-shadow: var(--shadow-lg);
            /* More prominent shadow for main content */
        }

        html.dark-mode .main-content {
            background-color: var(--dark-card);
        }

        /* Breadcrumbs */
        .breadcrumb-nav {
            display: flex;
            list-style: none;
            padding: 0;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }

        .breadcrumb-nav li {
            margin-bottom: 0.5rem;
        }

        .breadcrumb-nav li a {
            color: var(--secondary-color);
        }

        .breadcrumb-nav li a:hover {
            color: var(--secondary-dark);
        }

        .breadcrumb-nav li+li::before {
            content: ">";
            margin: 0 0.75rem;
            color: var(--light-text);
            opacity: 0.7;
        }

        html.dark-mode .breadcrumb-nav li+li::before {
            color: var(--dark-text);
        }

        .breadcrumb-nav li[aria-current="page"] {
            color: var(--light-text);
            opacity: 0.8;
            font-weight: 500;
        }

        html.dark-mode .breadcrumb-nav li[aria-current="page"] {
            color: var(--dark-text);
        }


        /* Content Card (used for sections) */
        section.content-section {
            /* Renamed from .content-card to be more specific */
            background-color: transparent;
            /* Sections don't need their own card bg if main-content is a card */
            border-radius: var(--radius-md);
            padding: 1rem 0;
            /* Vertical padding for sections */
            margin-bottom: 2.5rem;
            border: none;
            /* No border for sections within main content card */
            box-shadow: none;
            /* No shadow for sections */
        }


        /* Definition Boxes */
        .definition {
            background-color: rgba(52, 152, 219, 0.08);
            /* Softer bg */
            border-left: 5px solid var(--secondary-color);
            padding: 1.25rem 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
        }

        .definition strong {
            color: var(--secondary-dark);
            font-weight: 600;
            display: block;
            /* Label on its own line */
            margin-bottom: 0.3rem;
        }

        .example {
            font-style: italic;
            color: var(--light-text);
            opacity: 0.85;
            margin-top: 0.5rem;
            font-size: 0.95rem;
            padding-left: 0.5rem;
            /* Indent example slightly */
            display: block;
            /* Ensure it takes its own line if needed */
        }

        html.dark-mode .example {
            color: var(--dark-text);
        }

        .image-container {
            text-align: center;
            margin: 1.5rem 0;
        }

        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--light-border);
        }

        html.dark-mode .image-container img {
            border-color: var(--dark-border);
        }

        .image-container figcaption {
            font-size: 0.9rem;
            color: var(--light-text);
            opacity: 0.8;
            margin-top: 0.5rem;
        }

        html.dark-mode .image-container figcaption {
            color: var(--dark-text);
        }


        /* Tables */
        .styled-table {
            /* Changed from .comparison-table to a more generic name */
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            box-shadow: var(--shadow-sm);
            border-radius: var(--radius-md);
            overflow: hidden;
            /* To make border-radius work with th */
            border: 1px solid var(--light-border);
        }

        .styled-table th,
        .styled-table td {
            padding: 1rem 1.25rem;
            text-align: left;
            border-bottom: 1px solid var(--light-border);
        }

        html.dark-mode .styled-table th,
        html.dark-mode .styled-table td {
            border-bottom-color: var(--dark-border);
            border-left-color: var(--dark-border);
            /* Ensure all borders use dark mode color */
        }

        .styled-table th {
            background-color: var(--secondary-light);
            color: var(--primary-dark);
            /* Text color for contrast on light blue */
            font-weight: 600;
        }

        html.dark-mode .styled-table th {
            background-color: var(--primary-dark);
            /* Darker header for table in dark mode */
            color: var(--secondary-light);
        }

        .styled-table tr:nth-child(even) {
            background-color: rgba(52, 152, 219, 0.03);
            /* Very subtle striping */
        }

        html.dark-mode .styled-table tr:nth-child(even) {
            background-color: rgba(93, 173, 226, 0.05);
        }

        .styled-table tr:last-child td {
            border-bottom: none;
        }

        /* Code */
        code {
            font-family: 'Fira Code', monospace;
            background-color: rgba(231, 76, 60, 0.1);
            /* Accent color bg */
            color: var(--accent-color);
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }

        pre {
            background-color: var(--primary-dark);
            /* Dark bg for code blocks */
            color: #f8f9fa;
            /* Light text */
            padding: 1.25rem;
            border-radius: var(--radius-md);
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            box-shadow: var(--shadow-sm);
        }

        html.dark-mode pre {
            background-color: #1c1c1c;
            /* Even darker for dark mode code blocks */
            border: 1px solid var(--dark-border);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            /* Allow buttons to wrap on smaller screens */
            gap: 1rem;
            /* Add gap for wrapping */
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--light-border);
        }

        html.dark-mode .nav-buttons {
            border-top-color: var(--dark-border);
        }

        .nav-button {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            /* More gap */
            padding: 0.85rem 1.8rem;
            /* Slightly larger */
            background-color: var(--secondary-color);
            color: white !important;
            /* Ensure text is white */
            border-radius: var(--radius-md);
            font-weight: 600;
            /* Bolder */
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
            text-decoration: none !important;
            /* Ensure no underline */
            flex-grow: 1;
            /* Allow buttons to grow if space allows */
            text-align: center;
            justify-content: center;
            min-width: 200px;
            /* Minimum width for buttons */
        }

        .nav-button:hover {
            background-color: var(--secondary-dark);
            text-decoration: none !important;
            color: white !important;
            transform: translateY(-3px);
            /* More pronounced lift */
            box-shadow: var(--shadow-md);
        }

        .nav-button svg {
            width: 20px;
            height: 20px;
        }

        /* Details/Summary for Collapsible Sections */
        details {
            background-color: var(--light-card);
            border: 1px solid var(--light-border);
            border-radius: var(--radius-md);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-sm);
        }

        summary {
            padding: 1rem 1.5rem;
            font-weight: 600;
            color: var(--primary-dark);
            cursor: pointer;
            list-style-position: inside;
            /* Keeps marker aligned */
            transition: background-color 0.2s ease;
            display: block;
            /* Make summary full width to click anywhere */
        }

        summary strong {
            /* If strong tag is used within summary */
            color: inherit;
        }


        summary:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }

        details[open] summary {
            background-color: rgba(52, 152, 219, 0.1);
            border-bottom: 1px solid var(--light-border);
        }

        details>div {
            /* Content of details */
            padding: 1.5rem;
        }

        html.dark-mode details {
            background-color: var(--dark-card);
            border-color: var(--dark-border);
        }

        html.dark-mode summary {
            color: var(--primary-light);
        }

        html.dark-mode summary:hover {
            background-color: rgba(93, 173, 226, 0.1);
        }

        html.dark-mode details[open] summary {
            background-color: rgba(93, 173, 226, 0.15);
            border-bottom-color: var(--dark-border);
        }


        /* Responsive Adjustments */
        @media (max-width: 768px) {
            body {
                padding-top: 70px;
            }

            header.main-header {
                height: 70px;
                padding: 0 1.5rem;
            }

            .header-topic-title {
                font-size: 1em;
            }

            .logo-text {
                font-size: 1.5rem;
            }

            .eduvision-logo-header svg {
                width: 30px;
                height: 30px;
            }

            .header-nav {
                gap: 1rem;
            }

            .header-nav a {
                font-size: 0.9rem;
            }

            .theme-toggle {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .page-container {
                padding: 1.5rem;
            }

            h1 {
                font-size: 2.2rem;
            }

            h2 {
                font-size: 1.9rem;
            }

            h3 {
                font-size: 1.6rem;
            }

            .main-content {
                padding: 1.5rem;
            }
        }

        @media (max-width: 576px) {

            /* Further adjustments for smaller screens */
            .nav-buttons {
                flex-direction: column;
                /* Stack buttons vertically */
            }

            .nav-button {
                width: 100%;
                /* Make buttons full width */
            }
        }


        @media (max-width: 480px) {
            .header-nav a:not(.theme-toggle) {
                display: none;
            }

            /* Hide text links, keep toggle */
            .header-nav {
                justify-content: flex-end;
            }

            .header-topic-title {
                display: none;
            }

            /* Push toggle to right */
            .breadcrumb-nav {
                font-size: 0.8rem;
            }
        }

        .er-symbols img {
            /* Style for the ER symbols image */
            max-width: 400px;
            /* Adjust as needed */
            display: block;
            margin: 1rem auto;
            /* Center it */
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito+Sans:wght@700;800;900&family=Fira+Code&display=swap"
        rel="stylesheet">
</head>

<body>
    <header class="main-header">
        <a href="../../../index.html" class="eduvision-logo-header">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM12 6.5c-3.03 0-5.5 2.47-5.5 5.5s2.47 5.5 5.5 5.5 5.5-2.47 5.5-5.5-2.47-5.5-5.5-5.5zm0 9c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" />
            </svg>
            <span class="logo-text">EduVision</span>
        </a>
        <div class="header-topic-title">Topic 3: Entity-Relationship Model</div>
        <nav class="header-nav">
            <a href="../../../index.html">Home</a>
            <a href="../dbms.html">Syllabus</a>
            <a href="../../../MCQ/">Mock Test</a>
            <a href="../../../About/about.html">About</a>
            <button class="theme-toggle" id="themeToggle">
                <!-- Icon and text will be set by JS -->
            </button>
        </nav>
    </header>

    <div class="page-container">
        <aside class="sidebar">
            <h3 class="sidebar-title">On This Page</h3>
            <ul class="toc" id="tocList">
                <!-- TOC items will be generated by JS -->
            </ul>
        </aside>

        <main class="main-content">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb-nav">
                    <li><a href="../../../index.html">Home</a></li>
                    <li><a href="../dbms.html">Database Systems</a></li>
                    <li aria-current="page">Topic 3: Entity-Relationship Model</li>
                </ol>
            </nav>

            <h1>Topic 3: Entity-Relationship (ER) Model</h1>
            <p class="lead">The Entity-Relationship Model is a high-level conceptual data model used to design
                databases. It provides a graphical way to represent entities, their attributes, and the relationships
                between them.</p>

            <section id="er-intro" class="content-section">
                <h2>Introduction to ER Model</h2>
                <p>The Entity-Relationship (ER) model, proposed by Peter Chen in 1976, is a cornerstone of database
                    design. It serves as a logical representation of an enterprise's data structure, making it easier to
                    visualize and understand complex relationships. ER diagrams are the primary tools for this,
                    graphically depicting the flow of data and information.</p>
                Key points about ER Model:
                <ul>
                    <li>It's a high-level, conceptual data model.</li>
                    <li>Describes relationships among entities and their attributes.</li>
                    <li>ER diagrams are effective communication tools for database designers and stakeholders.</li>
                    <li>Helps in presenting the relations of various tables present in a database.</li>
                </ul>
            </section>

            <section id="entities-entity-sets" class="content-section">
                <h2>3.1 Entities and Entity Sets</h2>
                <div class="definition">
                    <strong>Entity:</strong> An object, person, place, event, or concept about which data is stored in a
                    database. In an ER diagram, an entity is represented by a rectangle.
                    <span class="example">Examples: Employee, Student, Company, Course, Loan.</span>
                </div>
                <div class="image-container">
                    <img src="https://i.imgur.com/m248w2U.png" alt="Entity Example: Employee works for Company"
                        style="max-width: 500px;">
                    <figcaption>Entity representation in an ER diagram.</figcaption>
                </div>
                <div class="definition">
                    <strong>Entity Set:</strong> A collection of entities of the same type that share similar properties
                    or attributes.
                    <span class="example">A group of all students in a college forms a 'Student' entity set.</span>
                </div>

                <h5>Types of Entity Sets:</h5>
                <ul>
                    <li><strong>Strong Entity Set:</strong> An entity set that has a primary key. Its existence is
                        independent of other entities. It is represented by a single rectangle.</li>
                    <li><strong>Weak Entity Set:</strong> An entity set that does not have enough attributes to form a
                        primary key on its own. Its existence depends on another strong entity (owner entity) via an
                        identifying relationship. It is represented by a double rectangle. The primary key of a weak
                        entity set is formed by the primary key of the strong entity set on which it is existence
                        dependent, plus the weak entity set's discriminator (partial key).</li>
                </ul>
                <div class="image-container">
                    <img src="https://i.imgur.com/C2XQ1sN.png" alt="Weak Entity Example: Loan and Installment"
                        style="max-width: 500px;">
                    <figcaption>Weak Entity (Installment) dependent on Strong Entity (Loan).</figcaption>
                </div>

                <table class="styled-table">
                    <caption>Strong Entity Set vs. Weak Entity Set</caption>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Strong Entity Set</th>
                            <th>Weak Entity Set</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Primary Key</td>
                            <td>Always has a primary key.</td>
                            <td>Does not have enough attributes to build its own primary key.</td>
                        </tr>
                        <tr>
                            <td>Symbol</td>
                            <td>Represented by a single rectangle.</td>
                            <td>Represented by a double rectangle.</td>
                        </tr>
                        <tr>
                            <td>Key Representation</td>
                            <td>Primary key attribute(s) underlined.</td>
                            <td>Partial key (discriminator) represented by a dashed underline.</td>
                        </tr>
                        <tr>
                            <td>Nature</td>
                            <td>Dominant entity set.</td>
                            <td>Subordinate entity set.</td>
                        </tr>
                        <tr>
                            <td>Identifier</td>
                            <td>Primary key is one of its attributes.</td>
                            <td>Its identifier is a combination of the primary key of the strong entity set and its own
                                partial key.</td>
                        </tr>
                        <tr>
                            <td>Relationship Symbol</td>
                            <td>Relationship with another strong entity uses a single diamond.</td>
                            <td>Identifying relationship with a strong entity uses a double diamond.</td>
                        </tr>
                        <tr>
                            <td>Connecting Line</td>
                            <td>Single connecting line to relationship.</td>
                            <td>Double connecting line to identifying relationship.</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="attributes" class="content-section">
                <h2>3.2 Attributes</h2>
                <div class="definition">
                    <strong>Attribute:</strong> A property or characteristic of an entity type or a relationship type.
                    Attributes describe the data elements of entities.
                    <span class="example">For a 'Student' entity, attributes could be Roll_no, Name, Age,
                        Address.</span>
                </div>
                <div class="image-container">
                    <img src="https://i.imgur.com/sR9vPIm.png" alt="Attributes of a Person Entity"
                        style="max-width: 500px;">
                    <figcaption>Attributes (ovals) connected to an Entity (rectangle).</figcaption>
                </div>
                <h5>Types of Attributes:</h5>
                <ol>
                    <li>
                        <strong>Simple (or Atomic) Attribute:</strong> An attribute that cannot be further subdivided
                        into smaller components.
                        <span class="example">Age, Salary.</span>
                    </li>
                    <li>
                        <strong>Key Attribute:</strong> An attribute (or set of attributes) whose values are distinct
                        for each individual entity in an entity set. It is used to uniquely identify an entity.
                        Represented by an ellipse with the text underlined.
                        <span class="example">Student_ID for a Student entity.</span>
                    </li>
                    <li>
                        <strong>Composite Attribute:</strong> An attribute that can be divided into smaller sub-parts,
                        which represent more basic attributes with independent meanings.
                        <span class="example">`Name` can be a composite attribute consisting of `First_name`,
                            `Middle_name`, and `Last_name`. `Address` can be composed of `Street`, `City`, `State`,
                            `ZipCode`.</span>
                        <div class="image-container">
                            <img src="https://i.imgur.com/g5zE7fN.png" alt="Composite Attribute Example"
                                style="max-width: 400px;">
                            <figcaption>Composite Attribute `Name`.</figcaption>
                        </div>
                    </li>
                    <li>
                        <strong>Multivalued Attribute:</strong> An attribute that can have multiple values for a single
                        entity instance. Represented by a double ellipse.
                        <span class="example">`Phone_numbers` for a person (home, mobile, work), `Email_Ids`,
                            `Hobbies`.</span>
                        <div class="image-container">
                            <img src="https://i.imgur.com/d5O45lE.png"
                                alt="Multivalued Attribute Example for Student Phone No" style="max-width: 400px;">
                            <figcaption>Multivalued Attribute `Phone_no`.</figcaption>
                        </div>
                    </li>
                    <li>
                        <strong>Derived Attribute:</strong> An attribute whose value can be calculated or derived from
                        other attributes (either in the same entity or related entities). Represented by a dashed
                        ellipse.
                        <span class="example">`Age` can be derived from `Date_of_Birth`. `Total_Marks` can be derived
                            from marks in individual subjects.</span>
                        <div class="image-container">
                            <img src="https://i.imgur.com/Lh6122r.png" alt="Derived Attribute Example for Student Age"
                                style="max-width: 400px;">
                            <figcaption>Derived Attribute `Age`.</figcaption>
                        </div>
                    </li>
                </ol>
            </section>

            <section id="relationships-relationship-sets" class="content-section">
                <h2>3.3 Relationships and Relationship Sets</h2>
                <div class="definition">
                    <strong>Relationship Type:</strong> Represents an association between two or more entity types. In
                    an ER diagram, a relationship type is represented by a diamond shape, connecting the participating
                    entity types with lines.
                    <span class="example">The relationship 'Enrolled_in' between 'Student' and 'Course' entity
                        types.</span>
                </div>
                <div class="image-container">
                    <img src="https://i.imgur.com/fL7YF3J.png"
                        alt="Relationship Type Example: Student Enrolled in Course" style="max-width: 500px;">
                    <figcaption>Relationship Type 'Enrolled in' connecting Student and Course entities.</figcaption>
                </div>
                <div class="definition">
                    <strong>Relationship Set:</strong> A collection of similar relationships. Each relationship in the
                    set is an instance of the relationship type, associating specific entity instances.
                    <span class="example">If S1 is enrolled in C2, S2 in C1, and S3 in C3, these three instances form
                        part of the 'Enrolled_in' relationship set.</span>
                </div>
                <div class="image-container">
                    <img src="https://i.imgur.com/r30N4zX.png" alt="Relationship Set Example" style="max-width: 500px;">
                    <figcaption>Set representation of a Relationship Set.</figcaption>
                </div>

                <h5>Degree of a Relationship Type:</h5>
                <p>The number of participating entity types in a relationship type.</p>
                <ul>
                    <li><strong>Unary (Recursive) Relationship:</strong> Both participants are of the same entity type.
                        Degree is 1.
                        <span class="example">An 'Employee' `manages` other 'Employees'.</span>
                        <div class="image-container"><img src="https://i.imgur.com/jW8O1T7.png"
                                alt="Unary Relationship Example" style="max-width:400px;"></div>
                    </li>
                    <li><strong>Binary Relationship:</strong> Involves two entity types. Degree is 2. This is the most
                        common type.
                        <span class="example">A 'Customer' `has` an 'Account'.</span>
                        <div class="image-container"><img src="https://i.imgur.com/eG2w20Y.png"
                                alt="Binary Relationship Example" style="max-width:400px;"></div>
                    </li>
                    <li><strong>Ternary Relationship:</strong> Involves three entity types. Degree is 3.
                        <span class="example">An 'Employee' `Works_in` a 'Department' at a particular 'Location'.</span>
                        <div class="image-container"><img src="https://i.imgur.com/4xH4LgO.png"
                                alt="Ternary Relationship Example" style="max-width:500px;"></div>
                    </li>
                    <li><strong>N-ary Relationship:</strong> Involves 'n' entity types. Degree is 'n'.
                        <div class="image-container"><img src="https://i.imgur.com/iQ9R1Jm.png"
                                alt="N-ary Relationship Example" style="max-width:400px;"></div>
                    </li>
                </ul>
            </section>

            <section id="er-diagrams-symbols" class="content-section">
                <h2>3.4 ER Diagrams (Symbols and Notation)</h2>
                <p>ER diagrams use a standard set of symbols to represent entities, attributes, and relationships.</p>
                <div class="image-container er-symbols">
                    <img src="https://i.imgur.com/Kj9oA1e.png" alt="ER Diagram Symbols">
                    <figcaption>Common Symbols used in ER Diagrams.</figcaption>
                </div>
                <ul>
                    <li><strong>Rectangle:</strong> Represents an entity type (or strong entity).</li>
                    <li><strong>Double Rectangle:</strong> Represents a weak entity type.</li>
                    <li><strong>Ellipse:</strong> Represents an attribute.</li>
                    <li><strong>Underlined Attribute in Ellipse:</strong> Represents a key attribute (primary key part).
                    </li>
                    <li><strong>Double Ellipse:</strong> Represents a multivalued attribute.</li>
                    <li><strong>Dashed Ellipse:</strong> Represents a derived attribute.</li>
                    <li><strong>Diamond:</strong> Represents a relationship type.</li>
                    <li><strong>Double Diamond:</strong> Represents an identifying relationship type (for weak
                        entities).</li>
                    <li><strong>Lines:</strong> Connect attributes to entity types and entity types to relationship
                        types.</li>
                </ul>
                <div class="image-container">
                    <img src="https://i.imgur.com/Jq4u8jE.png" alt="Components of ER Diagram" style="max-width: 600px;">
                    <figcaption>Hierarchical breakdown of ER Diagram Components.</figcaption>
                </div>
            </section>

            <section id="cardinality-participation" class="content-section">
                <h2>3.5 Cardinality and Participation Constraints</h2>
                <div class="definition">
                    <strong>Cardinality Ratio (Mapping Cardinality):</strong> Specifies the number of relationship
                    instances an entity can participate in. It defines the numerical relationship between occurrences of
                    entities in a relationship.
                </div>
                Common cardinality ratios for binary relationships:
                <ul>
                    <li>
                        <strong>One-to-One (1:1):</strong> An entity in set A is associated with at most one entity in
                        set B, and an entity in set B is associated with at most one entity in set A.
                        <span class="example">A 'Surgeon' `Headed_by` one 'HOD' (Head of Department), and one 'HOD'
                            heads one 'Surgeon' (assuming HOD is also a surgeon and heads only their own surgical
                            team).</span>
                        <div class="image-container"><img src="https://i.imgur.com/LpT8j8o.png"
                                alt="One-to-One Cardinality Example" style="max-width:500px;"></div>
                    </li>
                    <li>
                        <strong>One-to-Many (1:N):</strong> An entity in set A can be associated with any number (zero
                        or more) of entities in set B. An entity in set B can be associated with at most one entity in
                        set A.
                        <span class="example">One 'Surgeon Department' `Has` many 'Doctors', but each 'Doctor' belongs
                            to only one 'Surgeon Department'.</span>
                        <div class="image-container"><img src="https://i.imgur.com/kX3sS3z.png"
                                alt="One-to-Many Cardinality Example" style="max-width:500px;"></div>
                    </li>
                    <li>
                        <strong>Many-to-One (N:1):</strong> An entity in set A can be associated with at most one entity
                        in set B. An entity in set B can be associated with any number (zero or more) of entities in set
                        A.
                        <span class="example">Many 'Students' can enroll in one 'Course' (but a student can take only
                            one course in this specific simplified scenario).</span>
                        <div class="image-container"><img src="https://i.imgur.com/y2K5W8K.png"
                                alt="Many-to-One Cardinality Example" style="max-width:500px;"></div>
                    </li>
                    <li>
                        <strong>Many-to-Many (M:N):</strong> An entity in set A can be associated with any number (zero
                        or more) of entities in set B, and an entity in set B can be associated with any number (zero or
                        more) of entities in set A.
                        <span class="example">'Students' can enroll in multiple 'Courses', and a 'Course' can have
                            multiple 'Students'.</span>
                        <div class="image-container"><img src="https://i.imgur.com/XQO1fD6.png"
                                alt="Many-to-Many Cardinality Example" style="max-width:500px;"></div>
                    </li>
                </ul>

                <div class="definition">
                    <strong>Participation Constraint (or Existence Dependency):</strong> Specifies whether the existence
                    of an entity depends on its being related to another entity via the relationship type.
                </div>
                <ul>
                    <li>
                        <strong>Total Participation (Mandatory):</strong> Every entity in the entity set must
                        participate in at least one relationship instance in the relationship set. Represented by a
                        double line from the entity to the relationship diamond.
                        <span class="example">If every 'Student' *must* be enrolled in a 'Course'.</span>
                    </li>
                    <li>
                        <strong>Partial Participation (Optional):</strong> Not all entities in the entity set need to
                        participate in the relationship set. Represented by a single line.
                        <span class="example">A 'Course' may exist even if no 'Student' is currently enrolled in
                            it.</span>
                    </li>
                </ul>
                <div class="image-container">
                    <img src="https://i.imgur.com/N3s02n1.png" alt="Total and Partial Participation Example"
                        style="max-width:600px;">
                    <figcaption>Example showing Total Participation for Student and Partial for Course.</figcaption>
                </div>
            </section>

            <section id="weak-entities" class="content-section">
                <h2>3.6 Weak Entities and Identifying Relationships</h2>
                <p>As introduced earlier, a weak entity set does not have a primary key of its own. It depends on a
                    strong (owner) entity set for its existence and identification.</p>
                Key characteristics:
                <ul>
                    <li>Its existence depends on an identifying entity set.</li>
                    <li>It must relate to the identifying entity via a total, one-to-many relationship (typically).</li>
                    <li>The relationship connecting the weak entity to its owner is called an identifying relationship
                        (represented by a double diamond).</li>
                    <li>The discriminator (or partial key) of a weak entity set is the set of attributes that
                        distinguishes among all the entities of a weak entity set that are related to the same owner
                        entity. It is underlined with a dashed line.</li>
                    <li>The primary key of a weak entity set is formed by the primary key of the strong (owner) entity
                        set plus the weak entity set's discriminator.</li>
                </ul>
                <div class="image-container">
                    <img src="https://i.imgur.com/F4gqMv5.png" alt="Weak Entity Set Diagram Components"
                        style="max-width:600px;">
                    <figcaption>Detailed diagram of a Weak Entity Set (Payment) dependent on Loan.</figcaption>
                </div>
                <span class="example">A `Course-Offering` might be a weak entity dependent on a `Course` (strong
                    entity). The discriminator for `Course-Offering` could be `Semester` and `Year`. The primary key for
                    `Course-Offering` would be `{Course_ID, Semester, Year}`.</span>
            </section>

            <section id="enhanced-er-model" class="content-section">
                <h2>3.7 Enhanced ER (EER) Model</h2>
                <p>The Enhanced ER (EER) model extends the original ER model with additional semantic concepts to
                    represent more complex database applications. Key EER concepts include:</p>
                <details>
                    <summary><strong>1. Specialization</strong></summary>
                    <div>
                        <p>The process of defining a set of subclasses (sub-entities) of an entity type (superclass).
                            Each subclass inherits attributes and relationships of the superclass but may also have its
                            own specific attributes and relationships. It's a top-down approach.</p>
                        <span class="example">An 'Employee' entity can be specialized into 'Developer' and 'Tester'. An
                            'IS A' relationship (triangle pointing to superclass) is used.</span>
                        <div class="image-container"><img src="https://i.imgur.com/yG8k2T0.png"
                                alt="Specialization Example: Employee" style="max-width:400px;"></div>
                        <div class="image-container"><img src="https://i.imgur.com/P3D3i8T.png"
                                alt="Specialization Example: Student" style="max-width:500px;"></div>
                    </div>
                </details>
                <details>
                    <summary><strong>2. Generalization</strong></summary>
                    <div>
                        <p>The reverse process of specialization. It's a bottom-up approach where two or more
                            lower-level entity types are combined to form a higher-level, more general entity type by
                            identifying common features.</p>
                        <span class="example">'Car' and 'Truck' entities can be generalized into a 'Vehicle'
                            entity.</span>
                        <div class="image-container"><img src="https://i.imgur.com/zQo3V0N.png"
                                alt="Generalization Example: Animal" style="max-width:400px;"></div>
                        <div class="image-container"><img src="https://i.imgur.com/tD5c1vX.png"
                                alt="Generalization Example: Vehicle" style="max-width:500px;"></div>
                    </div>
                </details>
                <details>
                    <summary><strong>Generalization/Specialization Constraints</strong></summary>
                    <div>
                        <p>Constraints can be applied to generalization/specialization relationships:</p>
                        <ul>
                            <li><strong>Condition-defined vs. User-defined:</strong>
                                <ul>
                                    <li><em>Condition-defined:</em> Membership in a subclass is determined by a
                                        condition on an attribute of the superclass (e.g., `account_type = "saving"`).
                                    </li>
                                    <li><em>User-defined:</em> Membership is specified individually by the
                                        user/application.</li>
                                </ul>
                            </li>
                            <li><strong>Disjoint vs. Overlapping:</strong>
                                <ul>
                                    <li><em>Disjoint:</em> An entity can be a member of at most one subclass (denoted by
                                        'd' in the 'IS A' triangle). E.g., an account is either a `saving_account` OR a
                                        `current_account`.</li>
                                    <li><em>Overlapping:</em> An entity can be a member of more than one subclass
                                        (denoted by 'o' in the 'IS A' triangle). E.g., a `Person` can be both a
                                        `Customer` AND an `Employee`.</li>
                                </ul>
                            </li>
                            <li><strong>Total vs. Partial Participation:</strong>
                                <ul>
                                    <li><em>Total:</em> Every entity in the superclass must be a member of at least one
                                        subclass (double line from superclass to 'IS A' triangle).</li>
                                    <li><em>Partial:</em> An entity in the superclass does not have to belong to any
                                        subclass (single line).</li>
                                </ul>
                            </li>
                        </ul>
                        <div class="image-container"><img src="https://i.imgur.com/Kz0A3Lg.png"
                                alt="Generalization Constraints Examples" style="max-width:600px;"></div>
                    </div>
                </details>
                <details>
                    <summary><strong>3. Aggregation</strong></summary>
                    <div>
                        <p>An abstraction where a relationship set (along with its participating entity sets) is treated
                            and viewed as a single higher-level (aggregate) entity. This is used when a relationship
                            itself needs to participate in another relationship. It helps to avoid redundant
                            relationships.</p>
                        <span class="example">The relationship 'Offer' between 'College' and 'Course' can be aggregated
                            into a single entity that then participates in an 'Enquiry' relationship with
                            'Student'.</span>
                        <div class="image-container"><img src="https://i.imgur.com/fB7E0X1.png"
                                alt="Aggregation Example" style="max-width:500px;"></div>
                    </div>
                </details>
                <h5>Features of EER Model:</h5>
                <ul>
                    <li>Creates more accurate and precise database schema designs.</li>
                    <li>Reflects data properties and constraints more precisely.</li>
                    <li>Includes all modeling concepts of the ER model.</li>
                    <li>Used to represent a collection of objects that is a union of objects of different entity types.
                    </li>
                </ul>
            </section>

            <section id="er-advantages-disadvantages" class="content-section">
                <h2>Advantages and Disadvantages of ER Model</h2>
                <h3>Advantages:</h3>
                <ul>
                    <li><strong>Conceptual Simplicity:</strong> Easy to understand and draw, especially when the
                        relationships between entities and attributes are known.</li>
                    <li><strong>Better Visual Representation:</strong> Provides a clear diagrammatic representation of
                        the database's logical structure.</li>
                    <li><strong>Effective Communication Tool:</strong> Facilitates communication between database
                        designers, developers, and end-users.</li>
                    <li><strong>Highly Integrated with Relational Model:</strong> ER models can be easily converted into
                        relational tables.</li>
                    <li><strong>Easy Conversion to Other Data Models:</strong> Can be adapted to hierarchical, network,
                        or other data models.</li>
                    <li><strong>Straightforward Relational Representation:</strong> Designing an ER diagram simplifies
                        the creation of the relational database schema.</li>
                </ul>
                <h3>Disadvantages:</h3>
                <ul>
                    <li><strong>Limited Constraints and Specification:</strong> May not capture all complex constraints
                        and business rules directly.</li>
                    <li><strong>Potential Loss of Information:</strong> Some details or nuances might be hidden or lost
                        in the abstraction of the ER model.</li>
                    <li><strong>Limited Relationship Representation:</strong> Compared to some other models, its
                        representation of complex relationships might be limited.</li>
                    <li><strong>No Representation of Data Manipulation:</strong> ER diagrams focus on structure, not on
                        how data is manipulated or processed.</li>
                    <li><strong>No Industry Standard for Notation (Historically):</strong> While common symbols exist,
                        minor variations in notation can occur across different tools or methodologies (though core
                        concepts are consistent).</li>
                </ul>
            </section>

            <section id="sample-er-diagrams" class="content-section">
                <h2>Sample ER Diagrams</h2>
                <p>Below are examples of ER diagrams for common systems.</p>
                <div class="image-container">
                    <img src="https://i.imgur.com/nC7Wk2H.png" alt="Sample ER Diagrams: Library and Student Management"
                        style="max-width: 700px;">
                    <figcaption>Sample ER Diagrams: Library Management System and Student Management System.
                    </figcaption>
                </div>
                <div class="image-container">
                    <img src="https://i.imgur.com/Ff0gT6k.png" alt="Sample ER Diagram: Online Shop"
                        style="max-width: 700px;">
                    <figcaption>Sample ER Diagram: Online Shop.</figcaption>
                </div>
            </section>


            <div class="nav-buttons">
                <a href="topic-2.html" class="nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                    Previous: Relational Model
                </a>
                <a href="../dbms.html" class="nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-list">
                        <line x1="8" y1="6" x2="21" y2="6"></line>
                        <line x1="8" y1="12" x2="21" y2="12"></line>
                        <line x1="8" y1="18" x2="21" y2="18"></line>
                        <line x1="3" y1="6" x2="3.01" y2="6"></line>
                        <line x1="3" y1="12" x2="3.01" y2="12"></line>
                        <line x1="3" y1="18" x2="3.01" y2="18"></line>
                    </svg>
                    Back to Syllabus
                </a>
                <a href="topic-4.html" class="nav-button">
                    Next: SQL
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </a>
            </div>
        </main>
    </div>

    <script>
        // Theme Toggle
        const themeToggleButton = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;

        function applyTheme(theme) {
            if (theme === 'dark') {
                htmlElement.classList.add('dark-mode');
                themeToggleButton.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <span>Light Mode</span>`;
            } else {
                htmlElement.classList.remove('dark-mode');
                themeToggleButton.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <span>Dark Mode</span>`;
            }
        }

        const savedTheme = localStorage.getItem('theme') || 'light';
        applyTheme(savedTheme);

        themeToggleButton.addEventListener('click', () => {
            const newTheme = htmlElement.classList.contains('dark-mode') ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });

        // Table of Contents (TOC) Generator and Active Link Highlighting
        document.addEventListener('DOMContentLoaded', () => {
            const tocList = document.getElementById('tocList');
            const mainHeader = document.querySelector('header.main-header');
            const headerHeight = mainHeader ? mainHeader.offsetHeight : 80;
            const sections = document.querySelectorAll('.main-content section[id]');
            let tocLinks = [];

            if (tocList && sections.length > 0) {
                sections.forEach(section => {
                    const titleElement = section.querySelector('h2');
                    if (titleElement) {
                        const titleText = titleElement.textContent;
                        const sectionId = section.id;

                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = `#${sectionId}`;
                        link.textContent = titleText;
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const targetElement = document.getElementById(sectionId);
                            if (targetElement) {
                                const scrollToPosition = targetElement.offsetTop - headerHeight - 20; // 20px offset
                                window.scrollTo({
                                    top: scrollToPosition,
                                    behavior: 'smooth'
                                });
                                updateActiveTocLink(sectionId);
                            }
                        });
                        listItem.appendChild(link);
                        tocList.appendChild(listItem);
                        tocLinks.push(link);
                    }
                });

                function updateActiveTocLink(activeId) {
                    tocLinks.forEach(link => {
                        if (link.getAttribute('href') === `#${activeId}`) {
                            link.classList.add('active');
                        } else {
                            link.classList.remove('active');
                        }
                    });
                }

                const observerOptions = {
                    root: null,
                    rootMargin: `-${headerHeight + 20}px 0px -60% 0px`,
                    threshold: 0
                };

                let lastIntersectingSectionId = null;

                const observer = new IntersectionObserver(entries => {
                    let currentIntersectingEntry = null;
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            if (!currentIntersectingEntry || entry.intersectionRatio > currentIntersectingEntry.intersectionRatio) {
                                currentIntersectingEntry = entry;
                            }
                        }
                    });

                    if (currentIntersectingEntry) {
                        lastIntersectingSectionId = currentIntersectingEntry.target.id;
                        updateActiveTocLink(lastIntersectingSectionId);
                    } else if (entries.length > 0 && !entries.some(e => e.isIntersecting) && lastIntersectingSectionId) {
                        updateActiveTocLink(lastIntersectingSectionId);
                    }

                }, observerOptions);

                sections.forEach(section => {
                    observer.observe(section);
                });
                const currentHash = window.location.hash.substring(1);
                if (currentHash) {
                    updateActiveTocLink(currentHash);
                } else if (sections.length > 0) {
                    updateActiveTocLink(sections[0].id);
                }


            } else if (tocList) {
                const sidebar = document.querySelector('.sidebar');
                if (sidebar) sidebar.style.display = 'none';
            }
        });
    </script>
</body>

</html>