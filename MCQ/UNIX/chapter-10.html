<!DOCTYPE html>
<html lang="en" class=""> <!-- Start with no 'dark' class, JS will add -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unix MCQ Challenge - Chapter 10 (Filters using Regular Expressions)</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;900&display=swap" rel="stylesheet">
    <style>
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Logo Styles (Integrated into header flow) */
        .header-logo .text-2xl {
            font-size: 1.6rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 2px;
            letter-spacing: 0.01em;
            font-family: 'Nunito', sans-serif;
        }

        .header-logo .logo-text-part {
            /* Color will be handled by Tailwind text-gray-700 dark:text-gray-100 by default, or override if needed */
        }

        /* Make logo text distinctly visible in both modes if it clashes */
        html:not(.dark) .header-logo .logo-text-part {
            color: #374151;
            /* Tailwind gray-700 for light mode if needed */
        }

        html.dark .header-logo .logo-text-part {
            color: #f3f4f6;
            /* Tailwind gray-100 for dark mode */
        }

        .header-logo .logo-icon-part {
            color: #F59E0B;
            /* Tailwind amber-500, good contrast */
            transition: color 0.3s;
        }

        .header-logo a:hover .logo-icon-part {
            color: #D97706;
            /* Tailwind amber-600 */
        }

        .header-logo a {
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .header-logo svg {
            display: inline-block;
            vertical-align: middle;
            height: 1.4em;
            width: 1.4em;
            margin: 0 2px;
        }

        /* Ensure sticky header background is consistent */
        header.sticky {
            background-color: #f9fafb;
            /* Tailwind gray-50 */
        }

        html.dark header.sticky {
            background-color: #1f2937;
            /* Tailwind gray-800 */
        }

        /* Ensure sub-header info card also respects dark mode */
        #quizHeaderInfo {
            background-color: #ffffff;
            /* Tailwind white */
        }

        html.dark #quizHeaderInfo {
            background-color: #374151;
            /* Tailwind gray-700 */
        }


        .quiz-question-block {
            transition: opacity 0.5s ease-in-out, transform 0.3s ease-in-out;
            opacity: 0.6;
        }

        .quiz-question-block.active-question {
            opacity: 1;
            transform: scale(1.01);
            box-shadow: 0 0 15px rgba(80, 120, 255, 0.2);
        }

        html.dark .quiz-question-block.active-question {
            box-shadow: 0 0 15px rgba(100, 150, 255, 0.3);
        }

        .quiz-question-block.answered-question {
            opacity: 1;
            transform: scale(1);
        }

        .quiz-question-block.answered-question .option-btn {
            pointer-events: none;
            cursor: default;
        }

        .quiz-question-block .option-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .option-btn {
            transition: all 0.2s ease-in-out;
        }

        .option-btn:not(:disabled):hover {
            transform: translateY(-2px) scale(1.01);
            /* box-shadow: 0 4px 12px rgba(0,0,0,0.1); Tailwind's shadow-md or shadow-lg can be used directly on class */
        }

        html.dark .option-btn:not(:disabled):hover {
            /* box-shadow: 0 4px 12px rgba(255,255,255,0.08); */
        }

        .option-btn.correct {
            background-color: #10B981 !important;
            /* green-500 */
            color: white !important;
            border-color: #059669 !important;
            /* green-600 */
        }

        .option-btn.incorrect {
            background-color: #EF4444 !important;
            /* red-500 */
            color: white !important;
            border-color: #DC2626 !important;
            /* red-600 */
        }

        .option-btn.actual-correct-unselected {
            background-color: #D1FAE5 !important;
            /* green-100 */
            color: #065F46 !important;
            /* green-700 */
            border-color: #6EE7B7 !important;
            /* green-300 */
            animation: pulse-subtle-green 2s infinite;
        }

        html.dark .option-btn.actual-correct-unselected {
            background-color: #064E3B !important;
            color: #A7F3D0 !important;
            border-color: #10B981 !important;
        }


        @keyframes pulse-subtle-green {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            }

            70% {
                box-shadow: 0 0 0 8px rgba(16, 185, 129, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }

        .explanation-area {
            min-height: 70px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            overflow: hidden;
            background-color: #ffffff;
            /* Light mode */
        }

        html.dark .explanation-area {
            background-color: #374151;
            /* Tailwind gray-700 for dark mode */
        }

        .explanation-area.visible {
            opacity: 1;
        }

        /* Fix dark mode for feedback area */
        .feedback-area {
            color: #374151;
            /* Light mode text color */
        }

        html.dark .feedback-area {
            color: #f3f4f6;
            /* Tailwind gray-100 for dark mode text color */
        }

        /* Fix dark mode for question block */
        .quiz-question-block {
            background-color: #f9fafb;
            /* Light mode */
        }

        html.dark .quiz-question-block {
            background-color: #1f2937;
            /* Tailwind gray-800 for dark mode */
        }
    </style>

</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans transition-colors duration-300">

    <div class="container mx-auto p-4 min-h-screen flex flex-col">
        <!-- Header -->
        <header class="sticky mb-6 top-0 z-50 py-3 shadow-md bg-gray-50 dark:bg-gray-800">
            <!-- Top part of the header: Logo, Title, Dark Mode Toggle -->
            <div class="container mx-auto flex justify-between items-center px-2 sm:px-4">
                <!-- Eduvision Logo -->
                <div class="header-logo">
                    <div class="text-2xl font-bold">
                        <a href="../../index.html" class="flex items-center group">
                            <span class="logo-text-part text-gray-700 dark:text-gray-100">Edu</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="logo-icon-part" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <span class="logo-text-part text-gray-700 dark:text-gray-100">ision</span>
                        </a>
                    </div>
                </div>

                <!-- Page Title -->
                <h1 class="mx-4 text-lg sm:text-xl md:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 text-center flex-grow whitespace-nowrap cursor-pointer"
                    onclick="window.location.href='unix-mcq.html'">
                    Unix MCQ Challenge
                </h1>

                <!-- Dark Mode Toggle -->
                <div class="flex-shrink-0">
                    <button id="darkModeToggle"
                        class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none transition-colors duration-300"
                        aria-label="Toggle Dark Mode">
                        <!-- Icon will be set by JS -->
                    </button>
                </div>
            </div>

            <!-- Bottom part of the header: Quiz Info Card -->
            <div id="quizHeaderInfo" class="bg-white dark:bg-gray-700 p-3 mt-3 rounded-lg shadow-md container mx-auto">
                <h2 id="mainChapterTitle" class="text-xl font-semibold text-blue-600 dark:text-blue-400 mb-2"></h2>
                <div class="flex justify-between items-center text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-1">
                    <span id="questionProgressText">Answered: 0 / 0</span>
                    <span id="scoreDisplay">Score: 0</span>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                    <div id="progressBar"
                        class="bg-gradient-to-r from-blue-500 to-purple-600 h-2.5 rounded-full transition-all duration-500 ease-out"
                        style="width: 0%"></div>
                </div>
            </div>
        </header>

        <!-- Main Content Area for All Questions -->
        <main id="quizContentArea"
            class="flex-grow bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-xl shadow-2xl transition-colors duration-300 mt-4">
            <!-- Topics and Questions will be dynamically inserted here -->
        </main>

        <!-- Navigation Area (for Next Chapter) -->
        <div id="overallNavigation" class="mt-8 mb-4 flex justify-center">
            <button id="nextChapterBtn"
                class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 hidden">
                <!-- Text and onclick will be set by JS -->
            </button>
        </div>

        <!-- Footer -->
        <footer class="text-center py-6 text-sm text-gray-500 dark:text-gray-400">
            © 2023 Interactive MCQ Platform.
        </footer>
    </div>

    <script>
        const quizData = [
            {
                chapterName: "Unix MCQ on Filters using Regular Expressions",
                topics: [
                    {
                        topicName: "grep command – 1",
                        questions: [
                            {
                                id: "grep1_q1", question: "1. Which one of the following command is used for searching for a pattern in one or more file(s)?",
                                options: ["cd", "cp", "paste", "grep"], correctAnswer: "grep",
                                explanation: "UNIX has a special family of commands for handling search requirements, and the principal member of this family is the grep command. This command scans its input for a pattern and displays the lines containing the pattern, the line numbers or filenames containing the pattern."
                            },
                            {
                                id: "grep1_q2", question: "2. Which one of the following is the correct syntax for grep command?",
                                options: ["grep options filename(s)", "grep options pattern", "grep pattern filename", "grep options pattern filename(s)"], correctAnswer: "grep options pattern filename(s)",
                                explanation: "grep command is used to search a file for a pattern and display both matching and non-matching lines. The syntax for using grep command is:\ngrep  options  pattern  filename(s)"
                            },
                            {
                                id: "grep1_q3", question: "3. Which one of the following command will be used for searching “director” in emp.lst?",
                                options: ["grep “director”", "grep -v “director” emp.lst", "grep -director emp.lst", "grep “director” emp.lst"], correctAnswer: "grep “director” emp.lst",
                                explanation: "Because grep command is also a filter, it can search it’s standard input for the pattern. For example, the command grep “director” emp.lst will search the file emp.lst for the pattern “director” and will display the lines containing this pattern."
                            },
                            {
                                id: "grep1_q4", question: "4. When the pattern is not found in a file, grep command silently returns the prompt.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "grep command is also used as a filter for searching a pattern in a file. When the pattern is not found in the file, this command silently returns the prompt without displaying any diagnostic messages. For example,\n$ grep “executive” emp.lst    \n$ _                        // executive not found"
                            },
                            {
                                id: "grep1_q5", question: "5. grep command can be used for searching a pattern in more than one file.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "When we use grep command with multiple filenames, it displays the filename along with the output. For example, when we search “director” in emp1.lst emp2.lst then the following result will be displayed,\n$ grep  “director” emp1.lst  emp2.lst\nemp1.lst:1006| chanchal singhal | director | sales | 03/09/98 | 6700\nemp2.lst:6521| lalit chaudhary | director | marketing | 04/05/87 | 8200\nemp1.lst:4358 | barun sengupta | director | production | 09/09/78 | 7600"
                            },
                            {
                                id: "grep1_q6", question: "6. If there are special characters in a pattern, then we’ve to enclose them in ______",
                                options: ["single quotes", "double quotes", "without any quotes", "all quotes"], correctAnswer: "double quotes",
                                explanation: "We’ve to quote the pattern in double quotes when it contains multiple words or special characters else they will be interpreted in some other way by the shell. If the pattern doesn’t contain multiple words, then there is no need for quoting the patter in any quotes. If the pattern contains only multiple words, then we can quote the pattern in single quotes also."
                            },
                            {
                                id: "grep1_q7", question: "7. Which option is used with grep command for ignoring the case in pattern searching?",
                                options: ["-a", "-v", "-i", "-e"], correctAnswer: "-i",
                                explanation: "When we want to search a pattern using grep command and we want to ignore the case or we are not sure of the case, we’ve to use the -i option. This option ignores the case the pattern matching.\n$ grep  -i  ‘agarwal’  emp.lst\n3564| sudhir Agarwal | executive |personal | 06/07/47 |7500"
                            },
                            {
                                id: "grep1_q8", question: "8. Which option is used with grep command for deleting lines?",
                                options: ["-v", "-e", "-a", "-i"], correctAnswer: "-v",
                                explanation: "grep can play an inverse role; the -v (inverse) option selects all lines except those containing the pattern. For example, the following command." // Note: example was cut off in prompt
                            },
                            {
                                id: "grep1_q9", question: "9. Which option is used for displaying the line numbers containing the pattern along with lines?",
                                options: ["-v", "-i", "-e", "-n"], correctAnswer: "-n",
                                explanation: "The -n (number) option displays the line numbers containing the pattern, along with the lines. For example,\n$ grep  ‘director’ emp1.lst \n3:1006| chanchal singhal | director | sales | 03/09/98 | 6700\n5:6521| lalit chaudhary | director | marketing | 04/05/87 | 8200\n9:4358 | barun sengupta | director | production | 09/09/78 | 7600"
                            },
                            {
                                id: "grep1_q10", question: "10. ______ option counts the number of lines containing the pattern?",
                                options: ["-c", "-i", "-e", "-n"], correctAnswer: "-c",
                                explanation: "The -c option when used with grep command, counts the number of lines containing the pattern (which is not same as the number of occurrences of the pattern). For example,\n$ grep  -c  ‘director’  emp.lst\n4                // 4 lines contain the pattern ‘director’"
                            },
                            {
                                id: "grep1_q11", question: "11. Which option displays only the filename containing the pattern?",
                                options: ["-i", "-n", "-e", "-l"], correctAnswer: "-l",
                                explanation: "The -l (list) option displays only the names of files containing the pattern. For example, the following command will display the filenames having an extension .lst and containing the pattern ‘director’:\n$ grep  -l  ‘director’ *.lst\nDesign.lst\nEmp.lst\nEmp1.lst"
                            },
                            {
                                id: "grep1_q12", question: "12. _____ option is used when we need to match multiple patterns in a single invocation of grep command?",
                                options: ["-a", "-e", "-n", "-i"], correctAnswer: "-e",
                                explanation: "grep provides an option (-e) which is used when we want to match multiple patterns in a single invocation of the command. For example, the following command will match three agarwals:\n$ grep  -e “agarwal”  -e “aggarwal”  -e “ agrawal”  emp.lst"
                            },
                            {
                                id: "grep1_q13", question: "13. For taking patterns from a file, -f option is specified with grep command.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "If we want to search a single pattern or more than one pattern, then we can place them into a file with one pattern per line and after that, we can take the pattern for the grep command from the same file using -f option. For example,\n$ grep -f  pattern.lst  emp.lst        // pattern.lst contains 3 different patterns"
                            },
                            {
                                id: "grep1_q14", question: "14. POSIX identifies regular expressions as belonging to ____ categories.",
                                options: ["3", "2", "4", "5"], correctAnswer: "2",
                                explanation: "POSIX identifies regular expressions as belonging to two categories i.e. regular and extended."
                            },
                            {
                                id: "grep1_q15", question: "15. grep command supports both extended and regular expressions.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "grep command supports both categories of regular expressions. It supports basic regular expression by default and extended regular expression with -E option."
                            }
                        ]
                    },
                    {
                        topicName: "grep command – 2",
                        questions: [
                            {
                                id: "grep2_q1", question: "1. Which of the following is not a subset of BRE (basic regular expression) character subset?",
                                options: ["*", ".*", "^$", "ch+"], correctAnswer: "ch+",
                                explanation: "The basic regular expression character subset doesn’t contain ch+, as it is a part of the extended regular expression.\nSymbols    Matches\n*          - matches zero or more occurrences of the previous character.\n.*         - nothing or any number of characters\n^$         - lines containing nothing"
                            },
                            {
                                id: "grep2_q2", question: "2. Character class is used for matching a group of characters enclosed within a pair of _____",
                                options: ["( )", "“ “", "[ ]", "{ }"], correctAnswer: "[ ]",
                                explanation: "A regular expression lets us specify a group of characters enclosed within a pair of rectangular brackets, [ ]. For example, [ra] matches either r or a."
                            },
                            {
                                id: "grep2_q3", question: "3. The following command will match ‘Agarwal’, ‘agarwal’ and ‘agrawal’.\n\n$ grep “[aA]g[ar][ar]wal” emp.lst",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "The metacharacters [ and ] are used here to match all three agarwals. The character class [aA] matches the letter ‘a’ in both lowercase and uppercase. The model [ar][ar] matches any of the ‘aa’, ‘ar’,’ra’,’rr’."
                            },
                            {
                                id: "grep2_q4", question: "4. Which of the following symbol is used for matching the immediately preceding character?",
                                options: ["*", "$", "[ ]", "%"], correctAnswer: "*",
                                explanation: "The asterisk (*) refers to the immediately preceding character. It can match the previous character which can occur any number of times or not at all. For example, g* can match a null string along with g, gg, ggg, gggg and so on."
                            },
                            {
                                id: "grep2_q5", question: "5. Which symbol is used for matching a single character?",
                                options: ["*", ".", "&", "%"], correctAnswer: ".",
                                explanation: "A (.) matches a single character. The shell uses ? character to indicate that. The pattern g . . . will match a four character string beginning a ‘g’. The shell’s equivalent pattern is g???"
                            },
                            {
                                id: "grep2_q6", question: "6. Which of the following symbols are used for matching a pattern at specified locations?",
                                options: ["*", "^", "$", "^ and $"], correctAnswer: "^ and $",
                                explanation: "Most of the regular expression character are used for matching patterns, but there are two symbols that are used for matching pattern at beginning or end of a line. These symbols are ^ and $.\n^     - for matching at the beginning of a line\n$     - for matching at the end of line"
                            },
                            {
                                id: "grep2_q7", question: "7. The following command will match the lines beginning with ‘2’.\n\n$ grep “^2”  emp.lst",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "The ^ is used for matching at the beginning of the line. So the above command will match the following lines:\n2200| chanchal singhal | director | sales | 03/09/98 | 6700\n2456| lalit chaudhary | director | marketing | 04/05/87 | 8200\n2000 | barun sengupta | director | production | 09/09/78 | 7600"
                            },
                            {
                                id: "grep2_q8", question: "8. Which of the following symbols are a set of ERE (extended regular expressions)?",
                                options: ["+", "–", "?", "+ and ?"], // Corrected option from "+ and -" to "+ and ?"
                                correctAnswer: "+ and ?",
                                explanation: "The ERE set includes two special characters, + and ? which are used in place of * to restrict the matching scope. They signify the following,\n+     - matches one or more occurrences of the previous character\n?    - matches zero or one occurrence of the previous character"
                            },
                            {
                                id: "grep2_q9", question: "9. Which option is used when we want to use an ERE with grep command?",
                                options: ["-e", "-i", "-E", "-i"], correctAnswer: "-E",
                                explanation: "grep command supports both categories of regular expressions. It supports basic regular expression by default and extended regular expression with -E option."
                            },
                            {
                                id: "grep2_q10", question: "10. Which of the following symbols are used for matching multiple patterns?",
                                options: ["|", "&", "( and )", "| and ( and )"], correctAnswer: "| and ( and )",
                                explanation: "The | symbol is a delimiter of multiple patterns. Using it, we can match multiple patterns. For example, to match gupta and agarwal we can use the following command:\n$ grep -E ‘gupta|agarwal’  emp.lst\nSimilarly to match sengupta and dasgupta use the following command:\n\n$ grep -E ‘(sen|das)gupta’ emp.lst." // Corrected command example
                            }
                        ]
                    },
                    {
                        topicName: "sed command – 1",
                        questions: [
                            {
                                id: "sed1_q1", question: "1. Which of the following commands is known as stream editor?",
                                options: ["sed", "grep", "awk", "tr"], // Corrected option: grep appeared twice
                                correctAnswer: "sed",
                                explanation: "sed is a multipurpose tool which performs the function of several filters together. This filter is derived from the ed (original UNIX editor). It performs non-interactive operations on a data stream. It uses instructions to act on a text for selecting lines, with an action to be taken."
                            },
                            {
                                id: "sed1_q2", question: "2. What is the correct syntax for using sed?",
                                options: ["sed options file(s)", "sed options ‘action’", "sed options ‘address action’ file(s)", "sed ‘action’ file(s)"], correctAnswer: "sed options ‘address action’ file(s)",
                                explanation: "sed is a multipurpose tool which performs the function of several filters together. It can even manipulate characters in the file. The syntax for using this tool is:\nsed options ‘address action’ file(s)"
                            },
                            {
                                id: "sed1_q3", question: "3. Which one of the following command will be used for quitting after selecting 3 lines from file emp.lst?",
                                options: ["sed -n 3 emp.lst", "sed -i 1-3 emp.lst", "sed ‘3q’ emp.lst", "sed -n"], correctAnswer: "sed ‘3q’ emp.lst",
                                explanation: "We can use line addressing feature of sed command by using ‘q’ along with the line number. For example, 3q will quit after selecting 3 lines from the file. Here ‘q’ is used for quitting."
                            },
                            {
                                id: "sed1_q4", question: "4. Which of the following command is used with sed for outputting as well as printing the selected lines?",
                                options: ["q", "n", "p", "i"], correctAnswer: "p",
                                explanation: "Generally, ‘p’ is used for printing lines. However, this command behaves in a strange manner i.e. it both displays and prints the selected lines. So the selected lines will appear twice."
                            },
                            {
                                id: "sed1_q5", question: "5. To suppress the behavior of ‘p’ command of sed, we use ____ option.",
                                options: ["-q", "-n", "-i", "-v"], correctAnswer: "-n",
                                explanation: "When we use ‘p’, it behaves in a strange manner i.e. it both displays and prints the selected lines. So the selected lines will appear twice. To suppress this behavior, we use the -n option whenever we use the p command. For example,\n//selects line number 1-3 from emp.lst\n$ sed -n ‘1,3p’  emp.lst"
                            },
                            {
                                id: "sed1_q6", question: "6. The command $ sed -n ‘$p’ emp.lst will display the last line.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "If we want to select the last line of the file, we can either provide the line number of the file or it is more convenient to use $ symbol."
                            },
                            {
                                id: "sed1_q7", question: "7. Consider the following commands.\n\n$ sed -n ‘1,2p’ emp.lst\n$ sed -n ‘3,$!p’ emp.lst\nThe output of both commands will be the same.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "We can also use the negate (!) symbol, which can be used for negating any action. For instance, selecting the first two lines is same as not selecting lines 3 through the end."
                            },
                            {
                                id: "sed1_q8", question: "8. Which option is used with sed for using multiple instructions?",
                                options: ["-f", "-n", "-e", "–f and -e"], correctAnswer: "–f and -e",
                                explanation: "Both -e and -f allows us to use multiple instructions with sed. For example, -e allows us to enter as many instructions as we want, each preceded by the option.\n$ sed -n -e ‘1,2p’  -e ‘7,9p’ emp.lst"
                            },
                            {
                                id: "sed1_q9", question: "9. ____ option is used for taking instructions from a file.",
                                options: ["-f", "-e", "-i", "-n"], correctAnswer: "-f",
                                explanation: "sed command is quite liberal and it provides a great freedom in using and repeating options. We can use the -f option to direct sed to take its instructions from the file.\n$ sed -n -f  instruct.txt  emp.lst"
                            },
                            {
                                id: "sed1_q10", question: "10. To perform context addressing, we have to enclose the pattern in ____",
                                options: ["double quotes", "single quotes", "/ /", "$ $"], correctAnswer: "/ /",
                                explanation: "The second form of addressing apart from relative addressing is context addressing. It allows us to specify one or two patterns to locate lines. The pattern must be bounded by a / on either side."
                            },
                            {
                                id: "sed1_q11", question: "11. To select lines containing gupta and agarwal, which command will be used?",
                                options: ["sed -n ‘/gupta/,/agarwal/p’ emp.lst", "sed -n ‘/gupta/agarwal/p’ emp.lst", "sed ‘/gupta | agarwal’p’ emp.lst", "sed -n"], correctAnswer: "sed -n ‘/gupta/,/agarwal/p’ emp.lst",
                                explanation: "Context addressing allows us to specify one or two patterns to locate lines. To do so, a separate pair of context addresses by a comma."
                            },
                            {
                                id: "sed1_q12", question: "12. To write selected lines, ____ is used with sed.",
                                options: ["i", "n", "w", "p"], correctAnswer: "w",
                                explanation: "For writing selected lines to a separate file irrespective of the way of addressing (relative or context), we can use w (write) command. For example,\n$ sed -n ‘/director/w emp2.lst’  emp.lst        //saves output to emp2.lst"
                            }
                        ]
                    },
                    {
                        topicName: "sed command – 2",
                        questions: [
                            {
                                id: "sed2_q1", question: "1. sed can also perform the substitution.",
                                options: ["True", "False"], correctAnswer: "True",
                                explanation: "Substitution is one of the most important features of sed as it allows us to replace a pattern in its input with some other pattern. For this purpose, regular expressions are used for enhancing pattern matching capabilities."
                            },
                            {
                                id: "sed2_q2", question: "2. Which one of the following is the correct syntax for performing substitution using sed?",
                                options: ["sed [address]s /expr1/ expr2", "sed [address]s /expr1 expr2", "sed [address]s /expr1/ expr2/ flags", "sed [address]s"], correctAnswer: "sed [address]s /expr1/ expr2/ flags",
                                explanation: "Substitution is one of the most important features of sed as it allows us to replace a pattern in its input with some other pattern. The correct syntax for performing substitution is :\nsed [address]s  /expr1/ expr2/ flags\nwhere address represents the line numbers where we want to perform the substitution.\nexpr 1 and expr2 are expressions in which expr1 is replaced with expr2\nflags are used for implementing the global or local replacement policy"
                            },
                            {
                                id: "sed2_q3", question: "3. Which one of the following command is used for replacing | with : globally?",
                                options: ["sed ‘s/|/:/’ emp.lst", "sed ‘/|/:/’ emp.lst", "sed ‘s/|/:/g’ emp.lst", "sed ‘s/"], correctAnswer: "sed ‘s/|/:/g’ emp.lst",
                                explanation: "sed can perform substitution i.e. it allows us to replace a pattern in its input with some other pattern. The flag g is used for performing substitution globally."
                            },
                            {
                                id: "sed2_q4", question: "4. To replace the string ‘director’ in the first five lines of file emp.lst with ‘manager’ we can use _____",
                                options: ["sed ‘s/director/manager/’ emp.lst", "sed ‘1-5s/director/manager/’ emp.lst", "sed ‘1,5s/director/manager/’ emp.lst", "sed ‘15s"], correctAnswer: "sed ‘1,5s/director/manager/’ emp.lst",
                                explanation: "Performing substitution using sed is not only limited to a single character; it can be any string. Above command will replace the string ‘director’ with ‘manager’ in the first five lines of file emp.lst."
                            },
                            {
                                id: "sed2_q5", question: "5. Which of the following characters are used with sed as anchoring characters?",
                                options: ["$", "^", "%", "$ and ^"], correctAnswer: "$ and ^",
                                explanation: "We can use the anchoring characters, ^ and & with the same meaning. They are used as sole characters in the source pattern to replace the target pattern at that location. For example,\n$ sed ‘s/^/2/’  emp.lst          //add first character with a prefix ‘2’\n$ sed ‘s/$/.00/’ emp.lst        // add the last character with a suffix ‘.00’"
                            },
                            {
                                id: "sed2_q6", question: "6. What will be the function of the following command?\n$ sed ‘s/ *|/|/g’ emp.lst",
                                options: ["replace * with |", "replace / with |", "compress multiple spaces", "erroneous output"], correctAnswer: "compress multiple spaces",
                                explanation: "We can delete the trailing spaces from a file using sed. For this purpose the metacharacter (*) is used."
                            },
                            {
                                id: "sed2_q7", question: "7. Basic regular expressions are divided into ______ categories.",
                                options: ["1", "3", "2", "5"], correctAnswer: "3",
                                explanation: "Basic regular expressions are divided into three categories namely –repeated pattern, Interval regular expressions and tagged regular expressions."
                            },
                            {
                                id: "sed2_q8", question: "8. The interval regular expression uses the character _______",
                                options: ["{", "}", "{ and }", "( and )"], correctAnswer: "{ and }",
                                explanation: "Interval regular expression uses { and } with a single or pair of numbers between them. For example,\n$ grep  ‘[0-9]\\{10\\}’  emp.lst\nAbove command selects only those users who have a mobile phone. Here we used IRE to indicate that a numeral can occur 10 times (as phone numbers are of 10 digits)."
                            },
                            {
                                id: "sed2_q9", question: "9. Which one of the following command will be used for adding two spaces before every line in emp.lst?",
                                options: ["sed ‘s/^/  /’ emp.lst", "sed ‘s /  / /’emp.lst", "sed ‘s /$/  /’emp.lst", "sed ‘s/$/"], correctAnswer: "sed ‘s/^/  /’ emp.lst", // Corrected: Added two spaces in target
                                explanation: "The ^ symbol is used for prefixing some value at the beginning of any line in the file."
                            },
                            {
                                id: "sed2_q10", question: "10. Which shortcut does sed offer to replace the string Linux with Red hat Linux?",
                                options: ["{ }", "( )", "^^", "&"], correctAnswer: "&",
                                explanation: "sed supports the use of repeated pattern. For this purpose, & is used. It makes the whole string appear in the target string also. For example, to replace the string Linux with Red hat Linux, use the following command:\n$ sed ‘s/ Linux/Red Hat &/’ emp.lst"
                            },
                            {
                                id: "sed2_q11", question: "11. Which command will be used for selecting lines 3 to 10 from emp.lst?",
                                options: ["sed 3,10 emp.lst", "sed -n ‘3,10p’ emp.lst", "sed -n ‘^,10p’ emp.lst", "sed -n, 10p"], correctAnswer: "sed -n ‘3,10p’ emp.lst",
                                explanation: "To select a specific number of lines, we can use sed along with p option. For example,\n  $ sed -n ‘1,$p’ emp.lst\nwill select all the lines from the file emp.lst."
                            }
                        ]
                    }
                ]
            }
        ];


        const darkModeToggle = document.getElementById('darkModeToggle');
        const mainChapterTitleEl = document.getElementById('mainChapterTitle');
        const questionProgressTextEl = document.getElementById('questionProgressText');
        const scoreDisplayEl = document.getElementById('scoreDisplay');
        const progressBarEl = document.getElementById('progressBar');
        const quizContentAreaEl = document.getElementById('quizContentArea');
        const nextChapterBtn = document.getElementById('nextChapterBtn');

        let currentChapterIndex = 0; // This page handles only one chapter
        let score = 0;
        let totalQuestionsInChapter = 0;
        let questionsAnsweredCount = 0;
        let allQuestionElementsMap = new Map();
        let currentActiveQuestionId = null;

        const sunIcon = `<i class="fas fa-sun text-xl text-yellow-400"></i>`;
        const moonIcon = `<i class="fas fa-moon text-xl text-gray-700 dark:text-yellow-400"></i>`;

        function setDarkMode(isDark) {
            const htmlEl = document.documentElement;
            if (isDark) {
                htmlEl.classList.add('dark');
                darkModeToggle.innerHTML = sunIcon;
                localStorage.setItem('darkMode', 'enabled');
            } else {
                htmlEl.classList.remove('dark');
                darkModeToggle.innerHTML = moonIcon;
                localStorage.setItem('darkMode', 'disabled');
            }
        }

        darkModeToggle.addEventListener('click', () => {
            setDarkMode(!document.documentElement.classList.contains('dark'));
        });

        function renderChapter() {
            quizContentAreaEl.innerHTML = '';
            allQuestionElementsMap.clear();
            const chapterData = quizData[currentChapterIndex];
            mainChapterTitleEl.textContent = chapterData.chapterName;

            score = 0;
            questionsAnsweredCount = 0;
            totalQuestionsInChapter = 0;
            let firstQuestionId = null;

            chapterData.topics.forEach(topic => {
                totalQuestionsInChapter += topic.questions.length;
            });
            updateProgressAndScore();

            chapterData.topics.forEach((topic) => {
                const topicHeader = document.createElement('h3');
                topicHeader.className = 'text-xl md:text-2xl font-semibold text-purple-600 dark:text-purple-400 mt-10 mb-6 pt-6 border-t border-gray-300 dark:border-gray-600 first:mt-0 first:pt-0 first:border-t-0';
                topicHeader.textContent = topic.topicName;
                quizContentAreaEl.appendChild(topicHeader);

                topic.questions.forEach((q) => {
                    if (!firstQuestionId) firstQuestionId = q.id;

                    const questionBlock = document.createElement('div');
                    questionBlock.id = `qblock-${q.id}`;
                    questionBlock.className = 'quiz-question-block mb-10 p-5 bg-gray-50 dark:bg-gray-750 rounded-xl shadow-lg';
                    questionBlock.dataset.questionId = q.id;

                    const questionTextEl = document.createElement('p');
                    questionTextEl.className = 'text-md md:text-lg font-medium mb-5 text-gray-800 dark:text-gray-200';
                    questionTextEl.innerHTML = q.question.replace(/\n/g, '<br>');
                    questionBlock.appendChild(questionTextEl);

                    const optionsContainer = document.createElement('div');
                    optionsContainer.className = 'grid grid-cols-1 md:grid-cols-2 gap-3 mb-4';
                    q.options.forEach((option, optionIdx) => {
                        const button = document.createElement('button');
                        button.innerHTML = `<span class="text-left flex-grow">${String.fromCharCode(97 + optionIdx)}) ${option}</span>`;
                        button.className = 'option-btn w-full text-left p-3 bg-gray-200 dark:bg-gray-600 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg border-2 border-gray-300 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center justify-between disabled:opacity-60 disabled:cursor-not-allowed shadow-sm hover:shadow-md';
                        button.dataset.questionId = q.id;
                        button.dataset.optionIndex = optionIdx;
                        button.disabled = true;
                        button.addEventListener('click', handleAnswerSelection);
                        optionsContainer.appendChild(button);
                    });
                    questionBlock.appendChild(optionsContainer);

                    const feedbackEl = document.createElement('div');
                    feedbackEl.className = 'feedback-area min-h-[25px] text-sm mb-2';
                    questionBlock.appendChild(feedbackEl);

                    const explanationEl = document.createElement('div');
                    explanationEl.className = 'explanation-area p-3 rounded-md text-sm leading-relaxed';
                    explanationEl.innerHTML = `<strong class="block mb-1">Explanation:</strong> ${q.explanation.replace(/\n/g, '<br>')}`;
                    questionBlock.appendChild(explanationEl);


                    quizContentAreaEl.appendChild(questionBlock);
                    allQuestionElementsMap.set(q.id, questionBlock);
                });
            });

            if (firstQuestionId) {
                activateQuestion(firstQuestionId);
            }
            nextChapterBtn.classList.add('hidden');
            nextChapterBtn.textContent = "Next Chapter ➝ Essential Shell Programming";
            nextChapterBtn.onclick = () => {
                window.location.href = 'chapter-11.html'; // Assuming chapter 11
            };
        }

        function activateQuestion(questionId) {
            if (currentActiveQuestionId) {
                const prevActiveBlock = allQuestionElementsMap.get(currentActiveQuestionId);
                if (prevActiveBlock) {
                    prevActiveBlock.classList.remove('active-question');
                }
            }

            currentActiveQuestionId = questionId;
            const questionBlock = allQuestionElementsMap.get(questionId);
            if (questionBlock) {
                questionBlock.classList.add('active-question');
                questionBlock.querySelectorAll('.option-btn').forEach(btn => btn.disabled = false);
                setTimeout(() => {
                    const rect = questionBlock.getBoundingClientRect();
                    const headerHeight = document.querySelector('header.sticky').offsetHeight || 150;
                    if (rect.top < headerHeight || rect.bottom > (window.innerHeight - 50)) {
                        questionBlock.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 150);
            }
        }


        function findQuestionData(questionId) {
            for (const topic of quizData[currentChapterIndex].topics) {
                const question = topic.questions.find(q => q.id === questionId);
                if (question) return question;
            }
            return null;
        }

        function handleAnswerSelection(event) {
            const selectedButton = event.currentTarget;
            const questionId = selectedButton.dataset.questionId;
            const questionBlock = allQuestionElementsMap.get(questionId);

            if (!questionBlock || questionBlock.classList.contains('answered-question')) return;

            const questionData = findQuestionData(questionId);
            if (!questionData) return;

            const selectedOptionIndex = parseInt(selectedButton.dataset.optionIndex);
            const selectedOptionText = questionData.options[selectedOptionIndex];
            const correctAnswerText = questionData.correctAnswer;

            const feedbackEl = questionBlock.querySelector('.feedback-area');
            const explanationEl = questionBlock.querySelector('.explanation-area');
            const allOptionButtonsInBlock = questionBlock.querySelectorAll('.option-btn');

            allOptionButtonsInBlock.forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('hover:bg-blue-100', 'dark:hover:bg-blue-800', 'hover:shadow-md');
            });

            if (selectedOptionText === correctAnswerText) {
                score++;
                selectedButton.classList.add('correct');
                feedbackEl.innerHTML = `<p class="text-green-600 dark:text-green-400 font-semibold"><i class="fas fa-check-circle mr-2"></i>Correct!</p>`;
            } else {
                selectedButton.classList.add('incorrect');
                feedbackEl.innerHTML = `<p class="text-red-600 dark:text-red-400 font-semibold"><i class="fas fa-times-circle mr-2"></i>Incorrect. The correct answer is highlighted.</p>`;
                allOptionButtonsInBlock.forEach(btn => {
                    if (questionData.options[parseInt(btn.dataset.optionIndex)] === correctAnswerText) {
                        btn.classList.add('actual-correct-unselected');
                        btn.classList.remove('incorrect');
                    }
                });
            }

            explanationEl.classList.add('visible');

            questionBlock.classList.add('answered-question');
            questionBlock.classList.remove('active-question');
            questionsAnsweredCount++;
            updateProgressAndScore();

            setTimeout(() => {
                let nextQuestionIdToActivate = null;
                let foundCurrent = false;
                for (const topic of quizData[currentChapterIndex].topics) {
                    for (const q of topic.questions) {
                        if (foundCurrent) {
                            nextQuestionIdToActivate = q.id;
                            break;
                        }
                        if (q.id === questionId) {
                            foundCurrent = true;
                        }
                    }
                    if (nextQuestionIdToActivate) break;
                }

                if (nextQuestionIdToActivate) {
                    activateQuestion(nextQuestionIdToActivate);
                } else {
                    showChapterEnd();
                }
            }, 1500);
        }

        function updateProgressAndScore() {
            scoreDisplayEl.textContent = `Score: ${score}`;
            questionProgressTextEl.textContent = `Answered: ${questionsAnsweredCount} / ${totalQuestionsInChapter}`;
            const progressPercentage = totalQuestionsInChapter > 0 ? (questionsAnsweredCount / totalQuestionsInChapter) * 100 : 0;
            progressBarEl.style.width = `${progressPercentage}%`;
        }

        function showChapterEnd() {
            nextChapterBtn.classList.remove('hidden');
            // nextChapterBtn.onclick is already set in renderChapter

            const endMessage = document.createElement('p');
            endMessage.className = "text-center text-xl font-semibold mt-10 p-6 bg-blue-50 dark:bg-blue-900 rounded-lg";
            endMessage.textContent = `Chapter 10 Complete! Your final score: ${score} out of ${totalQuestionsInChapter}.`;
            quizContentAreaEl.appendChild(endMessage);
            endMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            const currentTheme = localStorage.getItem('darkMode');

            if (currentTheme === 'enabled') {
                setDarkMode(true);
            } else if (currentTheme === 'disabled') {
                setDarkMode(false);
            } else {
                setDarkMode(prefersDarkScheme.matches);
            }

            prefersDarkScheme.addEventListener('change', e => {
                if (localStorage.getItem('darkMode') === null) {
                    setDarkMode(e.matches);
                }
            });

            renderChapter();
        });

    </script>
</body>

</html>